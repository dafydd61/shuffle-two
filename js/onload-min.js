"use strict";function shuffle(t){for(var e=t.length;e;e--){var a=Math.floor(Math.random()*e),l=[t[a],t[e-1]];t[e-1]=l[0],t[a]=l[1]}return t}function playNextTrack(){if(console.log("Current track: "+currentTrack),currentTrack<playlist.length){var t=playlist[currentTrack].id,e=document.querySelector('audio[data-id="'+t+'"]'),a=document.querySelector('.track-interface[data-id="'+t+'"]');e.play(),a.classList.add("is-playing"),e.addEventListener("timeupdate",function(){this.currentTime>=this.duration&&(this.pause(),a.classList.remove("is-playing"),currentTrack++,playNextTrack())})}else stopAll()}function playStopAll(){allPlaying?stopAll():playAll()}function playAll(){allPlaying=!0,currentTrack=0,document.getElementById("controls").classList.add("is-all-playing");var t=document.getElementById("icon--playstop");t.classList.remove("icon--play"),t.classList.add("icon--stop"),playNextTrack()}function stopAll(){console.log("stop"),allPlaying=!1,document.querySelectorAll("audio").forEach(function(t){t.pause()}),document.querySelectorAll(".track-interface").forEach(function(t){t.classList.remove("is-playing")}),document.getElementById("controls").classList.remove("is-all-playing");var t=document.getElementById("icon--playstop");t.classList.add("icon--play"),t.classList.remove("icon--stop")}function stopTrack(t){var e=document.querySelector('audio[data-id="'+t+'"]');document.querySelector('.track-interface[data-id="'+t+'"]').classList.remove("is-playing"),e.pause()}function playTrack(t){var e=document.querySelectorAll("audio"),a=document.querySelectorAll(".track-interface");e.forEach(function(t){t.pause()}),a.forEach(function(t){t.classList.remove("is-playing")});var l=document.querySelector('audio[data-id="'+t+'"]');l.currentTime=0,l.play(),document.querySelector('.track-interface[data-id="'+t+'"]').classList.add("is-playing")}function makeTrackInterface(t){var e=document.createElement("li");e.classList.add("track-interface"),e.dataset.id=t.id;var a='<h1 class="track-title">'+t.title+'</h1>\n\t\t<span class="track-author">'+t.author+'</span>\n\t\t<div class="track-controls">\n\t\t\t<button class="btn track-play" data-id="'+t.id+'">Play</button>\n\t\t\t<button class="btn track-stop" data-id="'+t.id+'">Stop</button>\n\t\t</div>\n\t';return e.innerHTML=a,e}function loadAudio(t){t.forEach(function(t){var e=document.createElement("audio");e.src="media/"+t.fileName,e.dataset.id=t.id,audioContainer.appendChild(e)})}function showPlaylist(t){for(var e=document.getElementById("trackList");e.firstChild;)e.removeChild(e.firstChild);t.forEach(function(t){var a=makeTrackInterface(t);e.appendChild(a)}),document.querySelectorAll(".track-play").forEach(function(t){t.addEventListener("click",function(){playTrack(this.dataset.id)})}),document.querySelectorAll(".track-stop").forEach(function(t){t.addEventListener("click",function(){stopTrack(this.dataset.id)})})}function shuffleList(t){showPlaylist(shuffle(t))}var tracks=[{id:0,title:"Jan 7",fileName:"Jan7.mp3",author:"Christine"},{id:2,title:"Akula",fileName:"akula.mp3",author:"Joshua"},{id:3,title:"Bowtie",fileName:"bowtie.mp3",author:"Joshua"},{id:6,title:"March 11th",fileName:"march-11th.mp3",author:"Joshua"},{id:7,title:"Platform",fileName:"platform1.mp3",author:"Dafydd"},{id:8,title:"Weaver",fileName:"weaver-2.mp3",author:"Christine"}],playlist=void 0,allPlaying=!1,currentTrack=0,title="shuffle",titleSplit=title.split(""),titleShuffled=shuffle(titleSplit).join(""),pageTitle=document.getElementById("page-title");pageTitle.innerHTML=titleShuffled;var audioContainer=document.getElementById("audioContainer");loadAudio(tracks),playlist=shuffle(tracks),shuffleList(tracks);var playStopAllButton=document.getElementById("playStopAll");playStopAllButton.addEventListener("click",playStopAll);var shuffleButton=document.getElementById("shuffle");shuffleButton.addEventListener("click",function(){allPlaying||shuffleList(tracks)});