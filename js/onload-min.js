"use strict";function shuffle(t){for(var a=t.length;a;a--){var e=Math.floor(Math.random()*a),l=[t[e],t[a-1]];t[a-1]=l[0],t[e]=l[1]}return t}function playNextTrack(){if(console.log("Current track: "+currentTrack),currentTrack<playlist.length){var t=playlist[currentTrack].id,a=document.querySelector('audio[data-id="'+t+'"]'),e=document.querySelector('.track-interface[data-id="'+t+'"]');a.play(),e.classList.add("is-playing"),a.addEventListener("timeupdate",function(){this.currentTime>=this.duration&&(this.pause(),e.classList.remove("is-playing"),currentTrack++,playNextTrack())})}else stopAll()}function playAll(){allPlaying=!0,currentTrack=0;var t=document.getElementById("controls");t.classList.add("is-all-playing"),playNextTrack()}function stopAll(){console.log("stop"),allPlaying=!1;var t=document.querySelectorAll("audio");t.forEach(function(t){t.pause()});var a=document.getElementById("controls");a.classList.remove("is-all-playing")}function stopTrack(t){var a=document.querySelector('audio[data-id="'+t+'"]'),e=document.querySelector('.track-interface[data-id="'+t+'"]');e.classList.remove("is-playing"),a.pause()}function playTrack(t){var a=document.querySelectorAll("audio"),e=document.querySelectorAll(".track-interface");a.forEach(function(t){t.pause()}),e.forEach(function(t){t.classList.remove("is-playing")});var l=document.querySelector('audio[data-id="'+t+'"]');l.currentTime=0,l.play();var r=document.querySelector('.track-interface[data-id="'+t+'"]');r.classList.add("is-playing")}function makeTrackInterface(t){var a=document.createElement("li");a.classList.add("track-interface"),a.dataset.id=t.id;var e='<h1 class="track-title">'+t.title+'</h1>\n\t\t<span class="track-author">'+t.author+'</span>\n\t\t<div class="track-controls">\n\t\t\t<button class="track-play" data-id="'+t.id+'">Play</button>\n\t\t\t<button class="track-stop" data-id="'+t.id+'">Stop</button>\n\t\t</div>\n\t';return a.innerHTML=e,a}function loadAudio(t){t.forEach(function(t){var a=document.createElement("audio");a.src="media/"+t.fileName,a.dataset.id=t.id,audioContainer.appendChild(a)})}function showPlaylist(t){for(var a=document.getElementById("trackList");a.firstChild;)a.removeChild(a.firstChild);t.forEach(function(t){var e=makeTrackInterface(t);a.appendChild(e)});var e=document.querySelectorAll(".track-play");e.forEach(function(t){t.addEventListener("click",function(){playTrack(this.dataset.id)})});var l=document.querySelectorAll(".track-stop");l.forEach(function(t){t.addEventListener("click",function(){stopTrack(this.dataset.id)})})}function shuffleList(t){var a=shuffle(t);showPlaylist(a)}var tracks=[{id:0,title:"Jan 7",fileName:"Jan7.mp3",author:"Christine"},{id:2,title:"Akula",fileName:"akula.mp3",author:"Joshua"},{id:3,title:"Bowtie",fileName:"bowtie.mp3",author:"Joshua"},{id:6,title:"March 11th",fileName:"march-11th.mp3",author:"Joshua"},{id:7,title:"Platform",fileName:"platform1.mp3",author:"Dafydd"},{id:8,title:"Weaver",fileName:"weaver-2.mp3",author:"Christine"}],playlist=void 0,allPlaying=!1,currentTrack=0,audioContainer=document.getElementById("audioContainer");loadAudio(tracks),playlist=shuffle(tracks),shuffleList(tracks);var stopAllButton=document.getElementById("stopAll");stopAllButton.addEventListener("click",stopAll);var playAllButton=document.getElementById("playAll");playAllButton.addEventListener("click",playAll);var shuffleButton=document.getElementById("shuffle");shuffleButton.addEventListener("click",function(){allPlaying||shuffleList(tracks)});
//# sourceMappingURL=./onload-min.js.map