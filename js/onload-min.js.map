{"version":3,"sources":["onload.js"],"names":["shuffle","_trackList","i","length","j","Math","floor","random","_ref","playNextTrack","console","log","currentTrack","playlist","id","audio","document","querySelector","trackInterface","play","classList","add","addEventListener","this","currentTime","duration","pause","remove","stopAll","playAll","allPlaying","controls","getElementById","audios","querySelectorAll","forEach","stopTrack","playTrack","trackInterfaces","makeTrackInterface","track","li","createElement","dataset","trackContent","title","author","innerHTML","loadAudio","_tracks","src","fileName","audioContainer","appendChild","showPlaylist","_playlist","trackList","firstChild","removeChild","playButtons","button","stopButtons","shuffleList","tracks","stopAllButton","playAllButton","shuffleButton"],"mappings":"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","file":"onload-min.js","sourcesContent":["const tracks = [\n\t{'id': 0, 'title': 'Jan 7', 'fileName': 'Jan7.mp3', 'author': 'Christine'},\n\t{'id': 2, 'title': 'Akula', 'fileName': 'akula.mp3', 'author': 'Joshua'},\n\t{'id': 3, 'title': 'Bowtie', 'fileName': 'bowtie.mp3', 'author': 'Joshua'},\n\t{'id': 6, 'title': 'March 11th', 'fileName': 'march-11th.mp3', 'author': 'Joshua'},\n\t{'id': 7, 'title': 'Platform', 'fileName': 'platform1.mp3', 'author': 'Dafydd'},\n\t{'id': 8, 'title': 'Weaver', 'fileName': 'weaver-2.mp3', 'author': 'Christine'},\n];\n\nlet playlist;\nlet allPlaying = false;\nlet currentTrack = 0;\n\nfunction shuffle(_trackList) {\n\tfor (let i = _trackList.length; i; i--) {\n\t\tlet j = Math.floor(Math.random() * i);\n\t\t[_trackList[i - 1], _trackList[j]] = [_trackList[j], _trackList[i - 1]];\n\t}\n\treturn _trackList;\n}\n\nfunction playNextTrack() {\n\tconsole.log(`Current track: ${currentTrack}`);\n\tif (currentTrack < playlist.length) {\n\t\tconst id = playlist[currentTrack].id;\n\t\tconst audio = document.querySelector(`audio[data-id=\"${id}\"]`);\n\t\tconst trackInterface = document.querySelector(`.track-interface[data-id=\"${id}\"]`);\n\t\taudio.play();\n\t\ttrackInterface.classList.add('is-playing')\n\t\taudio.addEventListener('timeupdate', function() {\n\t\t\tif (this.currentTime >= this.duration) {\n\t\t\t\tthis.pause();\n\t\t\t\ttrackInterface.classList.remove('is-playing')\n\t\t\t\tcurrentTrack++;\n\t\t\t\tplayNextTrack();\n\t\t\t}\n\t\t});\n\t} else {\n\t\tstopAll();\n\t}\n}\n\nfunction playAll() {\n\tallPlaying = true;\n\tcurrentTrack = 0;\n\tconst controls = document.getElementById('controls');\n\tcontrols.classList.add('is-all-playing');\n\tplayNextTrack();\n}\n\nfunction stopAll() {\n\tconsole.log('stop');\n\tallPlaying = false;\n\tconst audios = document.querySelectorAll('audio');\n\taudios.forEach(function(audio) {\n\t\taudio.pause();\n\t});\n\tconst controls = document.getElementById('controls');\n\tcontrols.classList.remove('is-all-playing');\n}\n\nfunction stopTrack(id) {\n\tconst audio = document.querySelector(`audio[data-id=\"${id}\"]`);\n\tconst trackInterface = document.querySelector(`.track-interface[data-id=\"${id}\"]`);\n\ttrackInterface.classList.remove('is-playing');\n\taudio.pause();\n}\n\nfunction playTrack(id) {\n\tconst audios = document.querySelectorAll('audio');\n\tconst trackInterfaces = document.querySelectorAll('.track-interface');\n\taudios.forEach(function(audio) {\n\t\taudio.pause();\n\t});\n\ttrackInterfaces.forEach(function(trackInterface) {\n\t\ttrackInterface.classList.remove('is-playing');\n\t});\n\tconst audio = document.querySelector(`audio[data-id=\"${id}\"]`);\n\taudio.currentTime = 0;\n\taudio.play();\n\tconst trackInterface = document.querySelector(`.track-interface[data-id=\"${id}\"]`);\n\ttrackInterface.classList.add('is-playing');\n}\n\nconst audioContainer = document.getElementById('audioContainer');\n\nfunction makeTrackInterface(track) {\n\tconst li = document.createElement('li');\n\tli.classList.add('track-interface');\n\tli.dataset.id = track.id;\n\tconst trackContent = `<h1 class=\"track-title\">${track.title}</h1>\n\t\t<span class=\"track-author\">${track.author}</span>\n\t\t<div class=\"track-controls\">\n\t\t\t<button class=\"track-play\" data-id=\"${track.id}\">Play</button>\n\t\t\t<button class=\"track-stop\" data-id=\"${track.id}\">Stop</button>\n\t\t</div>\n\t`;\n\tli.innerHTML = trackContent;\n\treturn li;\n}\n\nfunction loadAudio(_tracks) {\n\t_tracks.forEach(function(track) {\n\t\tconst audio = document.createElement('audio');\n\t\taudio.src = `media/${track.fileName}`;\n\t\taudio.dataset.id = track.id;\n\t\taudioContainer.appendChild(audio);\n\t});\n}\n\nfunction showPlaylist(_playlist) {\n\n\tconst trackList = document.getElementById('trackList');\n\n\t// Clear the current playlist interface\n\twhile(trackList.firstChild) {\n\t\ttrackList.removeChild(trackList.firstChild);\n\t}\n\n\t_playlist.forEach(function(track) {\n\t\tconst trackInterface = makeTrackInterface(track);\n\t\ttrackList.appendChild(trackInterface);\n\t});\n\n\tconst playButtons = document.querySelectorAll('.track-play');\n\tplayButtons.forEach(function(button) {\n\t\tbutton.addEventListener('click', function() {\n\t\t\tplayTrack(this.dataset.id);\n\t\t});\n\t});\n\n\tconst stopButtons = document.querySelectorAll('.track-stop');\n\tstopButtons.forEach(function(button) {\n\t\tbutton.addEventListener('click', function() {\n\t\t\tstopTrack(this.dataset.id);\n\t\t});\n\t});\n\n}\n\nfunction shuffleList(_tracks) {\n\tconst playlist = shuffle(_tracks);\n\tshowPlaylist(playlist);\n}\n\nloadAudio(tracks);\nplaylist = shuffle(tracks);\nshuffleList(tracks);\n\nconst stopAllButton = document.getElementById('stopAll');\nstopAllButton.addEventListener('click', stopAll);\n\nconst playAllButton = document.getElementById('playAll');\nplayAllButton.addEventListener('click', playAll);\n\nconst shuffleButton = document.getElementById('shuffle');\nshuffleButton.addEventListener('click', function() {\n\tif (!allPlaying) {\n\t\tshuffleList(tracks);\n\t}\n});"]}